#set TIME := 1995 2010 2025 2040;
set TIME := 2000 2010 2020 2030 2040 2050;
#set TIME := 1995 2000 2005 2010 2015 2020 2025 2030 2035 2040 2045; # 2055 2065; # 2075;

set TECH := coal oil gas hydro nuclear wind pv fc pvh2;
set FUEL := coal oil gas uran ren;
set REGION := north west south east;
set SCEN := hihi hilo lohi lolo;
#set SCEN := middle;

param years := 10;	# years per period
param eps := 1e-8;	# small number
param dr := 0.05;	# discount rate
param infoyear := 2020;
param biginvest := 50000;

param market_growth := 0.3;	# maximum yearly market growth
param max_intermittent := 0.3;	# maximum intermittent energy contribution
param total_CO2_limit := 9999;	# 1995 emissions = 5.85 (5.85*60 = 351)
param max_cuminvcost := 20000;	# upper limit for cum_invcost variable (for scaling)

param fuel_tech default 0 :=
	coal coal 1		oil oil 1
	gas gas 1		gas fc 1
	uran nuclear 1
	ren hydro 1		ren pv 1	ren wind 1	ren pvh2 1  ;

#fuelcell:	4500 = 3000 * 1.5 (for replacement of short-lived stack)
#pvh2:		17.1 = 5 + 5 (pv) + 15/7 (fc)
#			$/kW	   $/kW/year  $/MWh
param:    lifetime  fixed_cost var_cost efficiency  :=
coal		30	30	5	0.45
oil		30	10	1	0.32
gas		30	15	3	0.50
hydro		50	30	0	1
nuclear		30	50	2	1
wind		30	20	0	1
pv		30	5	0	1
fc		30	15	2	0.65
pvh2		30	12.1	2	1	;

# high_exper 2045: nuclear 4 advcoal 4 ccgt 4 wind 3.5 pv 6 fc 4.5 pvh2 3
# high_exper 2065: double
# npieces 6 1 6 1 1 6 10 6 8
# max_exper 20 20 20 20 20 20 50 20 40 *1000
# high_exper 30 80 30 50 40 35 300 45 250 *100
# pv 9 h2 4 gas 3.5 fc 6 nuc 3  pv 25 h2 20
param:      base_invcost  npieces  high_exper  max_exper  intermittent  threshold knee  :=
coal		1300		4	2000	6000		0	0	0
oil		400		1	2000	6000		0	0	0
gas		700		4	3000	6000		0	0	0
hydro		2500		1	2000	6000		0	0	0
nuclear		2500		1	2000	6000		0	0	0
wind		1000		4	3000	6000		0.2	0	0
pv		5000		6	7000	25000		0.2	50	5	#9 30 4 25
fc		3500		6	3000	6000		0	50	0
pvh2		130		1	3000	17000		0	0	0	;	#550,4 (107)

param:		probability	regret	:=
#hihi		1	0	;
hihi		.25	8533.35		#.5625 .1875 .0625
hilo		.25	8709.77
lohi		.25	8577.21
lolo		.25	8763.21	;

param progress_ratio:
		hihi	hilo	lohi	lolo	:=
coal		.95	.95	.95	.95
oil		1	1	1	1
gas		.90	.90	.90	.90
hydro		1	1	1	1
nuclear		1	1	1	1
wind		.90	.90	.90	.90
pv		.80	.80	.90	.90
fc		.85	.92	.85	.92
pvh2		1	1	1	1	;	#.85

# Starting capacity modified somewhat (calibrated to generation in 1995)
#
#			GW
param start_capac:
		north	west	south	east	:=
coal		38	437	36	132
oil		70	543	184	166
gas		62	152	60	48
hydro		117	128	104	54
nuclear		43	269	5	17
wind		1.8	9.0	.2	1.5
pv		.02	.69	.02	.02
fc		.05	.19	.01	.05
pvh2		.05	.19	.01	.05	;

#			TWh		1995 to 2020	2020-2050	2050-
param:			demand_start	demand_growth1	demand_growth2  demand_growth3	:=
	north		1592		.023		.012		.012
	west		6619		.019		.012		.012
	south		1453		.028		.024		.012
	east		1709		.052		.024		.012;

param savings := 0;		# annual demand-side efficiency improvements
param dist_efficiency := .903;	# world consumption/generation 1995
param peak_multiplier := 1.5;	# (reserve capacity included)

#avail(pvh2) = avail(pv) * 0.9 * 0.7 (efficiencies for electrolysis & fuel cell)
param other_availability:
		north	west	south	east	:=
coal		.8	.8	.8	.8
oil		.8	.8	.8	.8
gas		.8	.8	.8	.8
hydro		.7	.7	.7	.7
nuclear		.75	.75	.75	.75
wind		.3	.3	.3	.3
pv		.125	.181	.220	.180	#load curve weighted pv_avail
fc		.8	.8	.8	.8
pvh2		.079	.114	.139	.113	;
#pv		.14	.18	.22	.18	; #average pv_avail;

param nfuel := 5;
#
# prices in $/MWh
#
# p1 = start price	p2 = price when reserves exhausted (linear increase)
#
#	100%:  7.5 16.1 12.5 11.4	50%:  6.0 12.6 9.65 9.55
#
#	max_fueluse 2,3,3,1
#
param:	p1	p2	   max_fueluse	:=
coal	4.5	12.1		.5
oil	9.1	14.7		.5
gas	6.8	10.1		3
uran	7.8	11.0		1
ren	0	0		23	;

# All of FSU in north, uranium guessed for Canada/USA, East low. (PWh)
param fuel_reserves:
	north	west	south	east	:=	#	sum
coal	1182	2352	491	1185		#	5210
oil	353	54	1283	82		#	1772
gas	603	111	607	83		#	1404
uran	266	210	178	4		#	 658
ren	2323	2323	2323	2323	;

# (TWh)
#
param non_electric_start:
	north	west	south	east	:=
coal	1160	2810	1330	7130
oil	3250	21120	7130	6000
gas	3490	9250	2730	830
uran	0	0	0	0
ren	0	0	0	0	;

# Annual average growth rates to 2020
param non_electric_growth1:
	north	west	south	east	:=
coal	.001	.001	.02	.02
oil	.009	.009	.03	.03
gas	.016	.016	.031	.031
uran	0	0	0	0
ren	0	0	0	0	;

# Annual average growth rates, 2020-2050
param non_electric_growth2:
	north	west	south	east	:=
coal	0	0	.01	.01
oil	0	0	.01	.01
gas	.01	.01	.02	.02
uran	0	0	0	0
ren	0	0	0	0	;

param non_electric_growth3 := 0;

# ton/MWh (93,78,55 g/MJbr)
param fuel_co2 :=
	coal	.3348
	oil	.2808
	gas	.1980
	uran	0
	ren	0	;

# TWh/year
param potential:
		north	west	south	east	:=
coal		0	0	0	0
oil		0	0	0	0
gas		0	0	0	0
hydro		1520	1120	4490	1170
nuclear		0	0	0	0
wind		7680	7680	3040	820
pv		0	0	0	0
fc		0	0	0	0
pvh2		0	0	0	0	;
